# Analytics API

## Overview

The Analytics API exposes aggregated event metrics generated by the ETL pipeline. It is implemented using FastAPI.

## Endpoint

The primary analytics endpoint is:

GET /analytics/events?event_type=<type>

Example:
GET /analytics/events?event_type=click

## Data Source

The API reads partitioned Parquet files from the `dataflow-processed` S3 bucket.  
Each partition corresponds to a specific event_type.

## Processing Logic

1. The API locates the Parquet files for the requested event_type
2. Files are read using pandas and pyarrow
3. Event counts are summed and returned as JSON

## Error Handling

- If no Parquet files exist for an event_type, the API returns a 404 error
- If the ETL has not been run, the API returns an informative message indicating analytics are not ready

## Example Response

```json
{
  "event_type": "click",
  "total_events": 42
}
```
